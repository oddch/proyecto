<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"

      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"> 

    <h:head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <link rel="icon" href="../Merkaruta/img/fav-icon.png" type="image/x-icon" />
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Merkaruta</title>

        <!-- Icon css link -->
        <link href="../Merkaruta/css/font-awesome.min.css" rel="stylesheet"/>
        <link href="../Merkaruta/vendors/elegant-icon/style.css" rel="stylesheet"/>
        <link href="../Merkaruta/vendors/themify-icon/themify-icons.css" rel="stylesheet"/>
        <!-- Bootstrap -->
        <link href="../Merkaruta/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="../Merkaruta/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <!-- Rev slider css -->
        <link href="../Merkaruta/vendors/revolution/css/settings.css" rel="stylesheet"/>
        <link href="../Merkaruta/vendors/revolution/css/layers.css" rel="stylesheet"/>
        <link href="../Merkaruta/vendors/revolution/css/navigation.css" rel="stylesheet"/>
        <link href="../Merkaruta/vendors/animate-css/animate.css" rel="stylesheet"/>

        <!-- Extra plugin css -->
        <link href="../Merkaruta/vendors/owl-carousel/owl.carousel.min.css" rel="stylesheet"/>

        <link href="../Merkaruta/css/style.css" rel="stylesheet"/>
        <link href="../Merkaruta/css/responsive.css" rel="stylesheet"/>
        <link rel="stylesheet" href="../resources/bootstrap/css/bootstrap.min.css"/>
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"/>
        <!-- Ionicons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"/>
        <!-- Theme style -->
        <link rel="stylesheet" href="../resources/dist/css/AdminLTE.min.css"/>

        <link rel="stylesheet" href="../resources/dist/css/skins/_all-skins.min.css"/>
        <!-- iCheck -->
        <link rel="stylesheet" href="../resources/plugins/iCheck/flat/blue.css"/>
        <!-- Morris chart -->
        <link rel="stylesheet" href="../resources/plugins/morris/morris.css"/>
        <!-- jvectormap -->
        <link rel="stylesheet" href="../resources/plugins/jvectormap/jquery-jvectormap-1.2.2.css"/>
        <!-- Date Picker -->
        <link rel="stylesheet" href="../resources/plugins/datepicker/datepicker3.css"/>
        <!-- Daterange picker -->
        <link rel="stylesheet" href="../resources/plugins/daterangepicker/daterangepicker.css"/>
        <!-- bootstrap wysihtml5 - text editor -->
        <link rel="stylesheet" href="../resources/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css"/>

        <!-- Theme style -->

    </h:head>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


    <header class="main_menu_area" style="height: 100px;">
        <nav class="navbar" style="background-color: #00000057;" >
            <img src="../Merkaruta/img/img/LogoOficial.png" alt=""/>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            </button>
            <nav class="navbar navbar-dark bg-dark" style="background: #00000057;">

                <nav class="navbar navbar-expand-lg  bg-facebook" style="background-color: #00000057;">

                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent" style="margin-top:40px;">
                        <ul class="navbar-nav mr-auto">
                            
                            <span class="hidden-xs"><h:outputText value="#{usuario.usuarioesion.nombres}" style="font-size: 20px; margin-left: 30px;"/></span>
                            <span class="hidden-xs"><h:outputText value="#{usuario.usuarioesion.apellidos}" style="font-size: 20px;"/></span>
                              <i class="fa fa-user-circle fa-2x"></i>
                               
                              
                            <li class="nav-item active">
                                
                           
                            </li>
                               <li class="nav-item">
                                <a class="nav-link" href="http://localhost:8080/MerkarutaOficial/faces/cliente/home.xhtml"><button type="button" class="btn btn-primary btn-sm"><i class="fa fa-home"></i> Home</button> </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="http://localhost:8080/MerkarutaOficial/faces/cliente/MiCarro.xhtml"><button type="button" class="btn btn-primary btn-sm"><i class="fa fa-archive"></i> VER MIS COMPRAS </button> </a>
                            </li>

                            <li class="nav-item">

                                <a class="nav-link" href="http://localhost:8080/MerkarutaOficial/faces/Graficas/producto.xhtml"><button type="button" class="btn btn-primary btn-sm"><i class="fa fa-users"></i>Estadisticas</button> </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="http://localhost:8080/MerkarutaOficial/faces/cliente/Calificar.xhtml"><button type="button" class="btn btn-primary btn-sm"><i class="fa fa-leaf"></i>Calificar</button></a>
                            </li>
                            <li class="nav-item">

                                <a class="nav-link" href="http://localhost:8080/MerkarutaOficial/faces/cliente/PedidosEchos.xhtml"><button type="button" class="btn btn-primary btn-sm"><i class="fa fa-leaf"></i>pedididos Entregados</button></a>
                            </li>
                        </ul>
                    </div>

                </nav>
 <h:form>
                                    <div class="pull-right">
                                        <h:commandLink class="btn btn-danger btn-flat" action="#{usuario.cerrarSesion()}">cerrar sesion</h:commandLink>
                                    </div></h:form>


            </nav>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">

            </div>
        </nav>
    </header>
    <h:body class="hold-transition skin-blue sidebar-mini">

        <!-- Content Header (Page header) -->
        <section class="content" style="margin-top: 100px;">
            <h2 class="page-header"></h2>

            <img src="../Merkaruta/img/Estetica.png" alt="" style="margin-left: 415px;"/>
            <br></br>
            <br></br>
            <div class="row">
                <div class="col-md-1"> 
                </div>
                <div class="col-md-10 col-sm-12 col-xs-12">
                    <div class="box box-default">

                        <!-- /.box-header -->
                        <div class="box-body ">

                            <h:form id="form"> 

                                <div class="row">
                                    <c:forEach var="objeto" items="#{catalogoControlador.listarProducto()}" > 
                                        <b:column col-sm="6" col-md="5" col-lg="3">
                                            <b:thumbnail >
                                                <img src="../productos/#{objeto.imagen}"  style="width: 250px;height: 200px;"/>
                                                <f:facet name="caption">
                                                    <h4 class="pull-right"><h:outputText value="$ #{objeto.precio}" /></h4>
                                                    <h4><a href="#"><h:outputText value=" #{objeto.nombre}"/></a></h4>
                                                    <b:commandButton iconAwesome="cart-plus" size="md"   oncomplete="$('#mostrar').modal('show')" update=":Fmostrar" span="4" look="info" > 


                                                        <f:setPropertyActionListener value="#{objeto}" target="#{catalogoControlador.producto}" />
                                                    </b:commandButton>
                                                    <h3><h:outputText value=" #{objeto.tipoProducto}" /> </h3>
                                                </f:facet>
                                            </b:thumbnail>
                                        </b:column>
                                    </c:forEach> 
                                </div>     

                            </h:form>
                            <b:modal  id="mostrar" title="" style="background: rgba(68, 177, 153, 0.14);">
                                <img src="../Merkaruta/img/img/LogoOficial.png" alt="" style="margin-left: 200px; margin-top: -10px;"/>
                                <b:form enctype="multipart/form-data" id="Fmostrar"> 
                                    <div class="row">
                                        <div class="col-xs-7 item-photo">
                                            <p:outputPanel></p:outputPanel>
                                            <br></br>
                                            <img style="max-width:100%;" src="../productos/#{catalogoControlador.producto.imagen}" />
                                        </div>
                                 

                                        <div class="col-xs-5" style="border:0px solid gray">
                                            <!-- Datos del vendedor y titulo del producto -->
                                            <h3> <h:outputText value="#{catalogoControlador.producto.nombre}"  id="nombreP" > </h:outputText></h3>    
                                            <h5 style="color:#337ab7"> Merkaruta<a href="#"> Express</a> · <small style="color:#337ab7"></small></h5>

                                            <!-- Precios -->
                                            <h6 class="title-price"><small>PRECIO</small></h6>
                                            <h3 style="margin-top:0px;">  <h:outputText value="$#{catalogoControlador.producto.precio} Pesos"> </h:outputText></h3>
                                            <div class="section" style="padding-bottom:20px;">
                                            </div>                                        
                                        </div>                              
                                     
                                                    <div class="section" style="padding-bottom:10px;">
                                                        <h6 class="title-attr"><small>CANTIDAD</small></h6>                    
                                                        <div>
                                                            
                                                            <h:inputText value="#{catalogoControlador.producto.cantidad}" id="canti"/>
                                                            <br></br>
                                                            <b:commandButton look="warning" value="-"><f:ajax listener="#{catalogoControlador.restar()}" render="canti"></f:ajax></b:commandButton>
                                                            <b:commandButton look="info"  style="margin-left: 30px" value="+" ><f:ajax listener="#{catalogoControlador.sumar()}" render="canti"></f:ajax></b:commandButton>
                                                        </div>
                                                    </div>  
                                
                                        <div class="col-xs-9">

                                            <div style="width:100%;border-top:1px solid silver">
                                                <p style="padding:15px;">
                                                    <small>
                                                        <h:outputText value="#{catalogoControlador.producto.tipoProducto}"   > </h:outputText>

                                                    </small>
                                                </p>

                                            </div>
                                        </div>		
                                    </div>
                                    <div class="modal-footer">
                                        <b:commandButton value="AGREGAR PRODUCTO"    action="#{catalogoControlador.agregar()}" look="primary" > </b:commandButton>
                                    </div>
                                </b:form>
                            </b:modal>
                            <b:modal id="carrito"  title="carrito" >
                                <h:form enctype="multipart/form-data" id="Fcarrito"> 
                                    <b:dataTable value="#{catalogoControlador.carrito}" var="carro">
                                        <b:dataTableColumn value="#{carro.nombre}" />
                                        <b:dataTableColumn value="#{carro.precio}" />
                                        <b:dataTableColumn value="#{carro.cantidad}" />
                                        <b:dataTableColumn label="suma" value="#{catalogoControlador.calcularS(carro.cantidad,carro.precio)}" />

                                        <b:dataTableColumn  ><b:commandButton value="-" look="danger" >
                                                <f:ajax listener="#{catalogoControlador.quitarLista(carro)}" render="Fcarrito"> </f:ajax>

                                            </b:commandButton>

                                        </b:dataTableColumn>




                                    </b:dataTable>

                                    <h:outputText value=" EL TOTAL ES:   #{catalogoControlador.calcularT()}" />



                                    <div class="modal-footer">          

                                        <b:commandButton value="cerrar"   look="warning"  type="button" onclick="$('#carrito').modal('hide')"    > </b:commandButton>
                                        <b:commandButton value="registrar"    action="#{catalogoControlador.registrarFactura()}" look="primary" > </b:commandButton>
                                    </div>
                                </h:form>
                            </b:modal> 
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <div class="col-md-1"> 
                </div>
            </div>
        </section>

      <c:forEach items="#{usuario.mostrarRoles}" var="item">

                    <li><a href="#{item.url}"><i class="fa fa-home"></i> <h:outputText value="#{item.nombre}" />  </a></li>

                </c:forEach>
    </h:body>
    <script src="../Merkaruta/js/jquery-3.2.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../Merkaruta/js/popper.min.js"></script>
    <script src="../Merkaruta/js/bootstrap.min.js"></script>
    <!-- Rev slider js -->
    <script src="../Merkaruta/vendors/revolution/js/jquery.themepunch.tools.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/jquery.themepunch.revolution.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/extensions/revolution.extension.actions.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/extensions/revolution.extension.video.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
    <script src="../Merkaruta/vendors/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <!-- Extra plugin css -->
    <script src="../Merkaruta/vendors/counterup/jquery.waypoints.min.js"></script>
    <script src="../Merkaruta/vendors/counterup/jquery.counterup.min.js"></script>
    <script src="../Merkaruta/vendors/counterup/apear.js"></script>
    <script src="../Merkaruta/vendors/counterup/countto.js"></script>
    <script src="../Merkaruta/vendors/owl-carousel/owl.carousel.min.js"></script>
    <script src="../Merkaruta/vendors/parallaxer/jquery.parallax-1.1.3.js"></script>
    <!--Tweets-->
    <script src="../Merkaruta/vendors/tweet/tweetie.min.js"></script>
    <script src="../Merkaruta/vendors/tweet/script.js"></script>

    <script src="../Merkaruta/js/theme.js"></script>
    <script src="../resources/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
</html>




